if [[ "$#" -ne "1" ]]; then
  echo -e "${ERROR} (${0##*/} - ${FUNCNAME[*]}): '${FUNCNAME[0]}' requires a configuration file!" 1>&2
  exit 1
elif [ ! -e "$(readlink -e "$1")" ]; then
  echo -e "${ERROR} (${0##*/} - ${FUNCNAME[*]}): '$1' seems to not be a regular file!" 1>&2
  exit 1
fi
local -r config_json="$(readlink -e "$1")"
declare -a input_data
createInputData "${config_json}" input_data
declare -a mode_keys
getKeysByNode "${config_json}" "modes" mode_keys
declare -a view_keys
getKeysByNode "${config_json}" "views" view_keys

local active_mode=""
getAndCheckStringByKey "${config_json}" "default_mode" mode_keys active_mode
local active_view=""
getAndCheckStringByKey "${config_json}" "default_view" view_keys active_view
declare -a view_commands
readViewCmds "${config_json}" "${active_view}" view_commands
declare -A menu_items_by_id
createMenuItems "${config_json}" input_data view_commands menu_items_by_id
declare -A menu_options_by_input_key
createOptionalMenuItems "${config_json}" "${active_mode}" menu_options_by_input_key

drawMenu menu_items_by_id menu_options_by_input_key

declare user_selection
getUserInput menu_items_by_id menu_options_by_input_key user_selection
echo "${user_selection}"
